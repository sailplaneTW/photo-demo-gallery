<!DOCTYPE html>
<html class="no-js" lang="en">
    <head>
        <meta content="charset=utf-8">
        <title>[Photo Demo]</title>
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
        <!-- Demo CSS -->
        <link rel="stylesheet" href="css/demo.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="../flexslider.css" type="text/css" media="screen" />
        <link rel="shortcut icon" type="image/x-icon" href="images/favicon-6/favicon.ico"/>
        <!-- Quick Selection Table CSS -->
        <link rel="stylesheet" href="css/quick_select_table.css" type="text/css" media="screen" />
        <!-- Check Box -->
        <link href="css/checkbox.css" rel="stylesheet" type="text/css">
        <link href="css/sticky.css" rel="stylesheet" type="text/css">
        <!-- Modernizr -->
        <script src="js/modernizr.js"></script>
        <link rel="stylesheet" href="css/jquery-ui.css">
        <link rel="stylesheet" href="css/arrow.css">
        <!-- block right event -->
        <style type="text/css">
            body {
            -moz-user-select : none;
            -webkit-user-select: none;
            }
        </style>
    </head>
    <body class="loading">
        <div id="container" class="cf">
            <header role="navigation">
                <center><img id='logo_img' name='logo_img' src="images/tuesday.png" alt="(^__^)" height='100' width='250'/></center>
                <br/>
                <center>
                    <h1>(sailplaneTW's photo)</h1>
                    <!--<h2 id='showing_image_name' name='showing_image_name'></h2>-->
                    <br/>
                    <center id='quick_selection_table_location_1' name='quick_selection_table_location_1'></center>
                    <!-- Quick Selection Table -->
                    <!--
                    <div class="CSSTableGenerator" id='quick_selection_table_div' name='quick_selection_table_div'>
                        <table id='quick_selection_table' name='quick_selection_table' role='quick_selection_table'>
                            <tr>
                                <td id='qtdtitle' name='qtdtitle' colspan='4'>快 速 選 單</td>
                            </tr>
                            <tr>
                                <td id='qtd0' name='qtd0'><img src='images/smile.png' id='qtdimg0' name='qtdimg0'></img></td>
                                <td id='qtd1' name='qtd1'><img src='images/smile.png' id='qtdimg1' name='qtdimg1'></img></td>
                                <td id='qtd2' name='qtd2'><img src='images/smile.png' id='qtdimg2' name='qtdimg2'></img></td>
                                <td id='qtd3' name='qtd3'><img src='images/smile.png' id='qtdimg3' name='qtdimg3'></img></td>
                            </tr>
                            <tr>
                                <td id='qtd4' name='qtd4'><img src='images/smile.png' id='qtdimg4' name='qtdimg4'></img></td>
                                <td id='qtd5' name='qtd5'><img src='images/smile.png' id='qtdimg5' name='qtdimg5'></img></td>
                                <td id='qtd6' name='qtd6'><img src='images/smile.png' id='qtdimg6' name='qtdimg6'></img></td>
                                <td id='qtd7' name='qtd7'><img src='images/smile.png' id='qtdimg7' name='qtdimg7'></img></td>
                            </tr>
                            <tr>
                                <td id='qtd8' name='qtd8'><img src='images/smile.png' id='qtdimg8' name='qtdimg8'></img></td>
                                <td id='qtd9' name='qtd9'><img src='images/smile.png' id='qtdimg9' name='qtdimg9'></img></td>
                                <td id='qtd10' name='qtd10'><img src='images/smile.png' id='qtdimg10' name='qtdimg10'></img></td>
                                <td id='qtd11' name='qtd11'><img src='images/smile.png' id='qtdimg11' name='qtdimg11'></img></td>
                            </tr>
                            <tr>
                                <td id='qtd12' name='qtd12'><img src='images/smile.png' id='qtdimg12' name='qtdimg12'></img></td>
                                <td id='qtd13' name='qtd13'><img src='images/smile.png' id='qtdimg13' name='qtdimg13'></img></td>
                                <td id='qtd14' name='qtd14'><img src='images/smile.png' id='qtdimg14' name='qtdimg14'></img></td>
                                <td id='qtd15' name='qtd15'><img src='images/smile.png' id='qtdimg15' name='qtdimg15'></img></td>
                            </tr>
                        </table>
                    </div>
                    -->
                    <br id='br1' name='br1'/>
                    <br id='br2' name='br2'/>
                    <div id='sliderbar_arrow_container' style='width:100%;'>
                        <div id='arrow_prev' name='arrow_prev' style='float:left;width:10%;'><i class="arrow-left" id='prev_page' name='prev_page'></i></div>
                        <div style='width:80%;float:left;'>
                            <div id="sliderbar" style='width:100%;'></div>
                        </div>
                        <div id='arrow_next' name='arrow_next' style='float:right;width:10%;'><i class="arrow-right" id='next_page' name='next_page'></i></div>
                    </div>
                    <p id='debugmsg' name='debugmsg' style='visibility: hidden;'></p>
                </center>
            </header>
            <div id="main" role="main">
                <section class="slider">
                    <div id="slider" class="flexslider">
                        <ul class="slides" id='photo_slides_list' name='photo_slides_list'>
                            <!--
                            <li><img src="images/kitchen_adventurer_cheesecake_brownie.jpg" id='img0' name='img0' alt='kitchen_adventurer_cheesecake_brownie' /></li>
                            <li><img src="images/kitchen_adventurer_lemon.jpg" id='img1' name='img1'  alt='kitchen_adventurer_lemon' /></li>
                            <li><img src="images/kitchen_adventurer_donut.jpg" id='img2' name='img2' alt='kitchen_adventurer_donut' /></li>
                            <li><img src="images/kitchen_adventurer_caramel.jpg" id='img3' name='img3' alt='kitchen_adventurer_caramel' /></li>
                            <li><img src="images/kitchen_adventurer_cheesecake_brownie.jpg" id='img4' name='img4' alt='kitchen_adventurer_cheesecake_brownie' /></li>
                            <li><img src="images/kitchen_adventurer_lemon.jpg" id='img5' name='img5' alt='kitchen_adventurer_lemon' /></li>
                            <li><img src="images/kitchen_adventurer_donut.jpg" id='img6' name='img6' alt='kitchen_adventurer_donut' /></li>
                            <li><img src="images/kitchen_adventurer_caramel.jpg" id='img7' name='img7' alt='kitchen_adventurer_caramel' /></li>
                            <li><img src="images/kitchen_adventurer_cheesecake_brownie.jpg" id='img8' name='img8' alt='kitchen_adventurer_cheesecake_brownie' /></li>
                            <li><img src="images/kitchen_adventurer_lemon.jpg" id='img9' name='img9' alt='kitchen_adventurer_lemon' /></li>
                            <li><img src="images/kitchen_adventurer_donut.jpg" id='img10' name='img10' alt='kitchen_adventurer_donut' /></li>
                            <li><img src="images/kitchen_adventurer_caramel.jpg" id='img11' name='img11' alt='kitchen_adventurer_caramel' /></li>
                            -->
                            <!--
                                <li><img src="../photo/germany_1001.jpg" id='img12' name='img12' alt='germany_1001' /></li>
                                <li><img src="../photo/green_meadow_2-HD.jpg" id='img13' name='img13' alt='green_meadow_2-HD' /></li>
                                <li><img src="../photo/IMAG0063_1.jpg" id='img14' name='img14' alt='IMAG0063_1' /></li>
                                -->
                        </ul>
                        <div class='cbcontainer' id='cbcontainer_div' name='cbcontainer_div'>
                            <!--
                            <div id='checkbox_div0' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj0"/>
                                <label for="cbobj0" class="check-box" id='cbobjlabel0'></label>
                            </div>
                            <div id='checkbox_div1' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj1" />
                                <label for="cbobj1" class="check-box" id='cbobjlabel1'></label>
                            </div>
                            <div id='checkbox_div2' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj2" />
                                <label for="cbobj2" class="check-box" id='cbobjlabel2'></label>
                            </div>
                            <div id='checkbox_div3' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj3" />
                                <label for="cbobj3" class="check-box" id='cbobjlabel3'></label>
                            </div>
                            <div id='checkbox_div4' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj4" />
                                <label for="cbobj4" class="check-box" id='cbobjlabel4'></label>
                            </div>
                            <div id='checkbox_div5' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj5" />
                                <label for="cbobj5" class="check-box" id='cbobjlabel5'></label>
                            </div>
                            <div id='checkbox_div6' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj6" />
                                <label for="cbobj6" class="check-box" id='cbobjlabel6'></label>
                            </div>
                            <div id='checkbox_div7' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj7" />
                                <label for="cbobj7" class="check-box" id='cbobjlabel7'></label>
                            </div>
                            <div id='checkbox_div8' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj8" />
                                <label for="cbobj8" class="check-box" id='cbobjlabel8'></label>
                            </div>
                            <div id='checkbox_div9' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj9" />
                                <label for="cbobj9" class="check-box" id='cbobjlabel9'></label>
                            </div>
                            <div id='checkbox_div10' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj10" />
                                <label for="cbobj10" class="check-box" id='cbobjlabel10'></label>
                            </div>
                            <div id='checkbox_div11' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj11" />
                                <label for="cbobj11" class="check-box" id='cbobjlabel11'></label>
                            </div>
                            <div id='checkbox_div12' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj12" />
                                <label for="cbobj12" class="check-box" id='cbobjlabel12'></label>
                            </div>
                            <div id='checkbox_div13' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj13" />
                                <label for="cbobj13" class="check-box" id='cbobjlabel13'></label>
                            </div>
                            <div id='checkbox_div14' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj14" />
                                <label for="cbobj14" class="check-box" id='cbobjlabel14'></label>
                            </div>
                            <div id='checkbox_div15' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>
                                <input type="checkbox" id="cbobj15" />
                                <label for="cbobj15" class="check-box" id='cbobjlabel15'></label>
                            </div>
                            -->
                        </div>
                    </div>
                </section>
                <aside>
                    <center id='quick_selection_table_location_2' name='quick_selection_table_location_2'></center>
                </aside>
            </div>
        </div>
        <!-- save data in page -->
        <p id='current_img_id' name='current_img_id' style='visibility: hidden;'>0</p>
        <p id='ok_list' name='ok_list' style='visibility: hidden;'></p>
        <p id='current_page' name='current_page' style='visibility: hidden;'>0</p>
        <p id='row_num' name='row_num' style='visibility: hidden;'></p>
        <p id='col_num' name='col_num' style='visibility: hidden;'></p>
        <!-- jQuery -->
        <script src="../jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.min.js">\x3C/script>')</script>
        <!-- FlexSlider -->
        <script defer src="../jquery.flexslider.js"></script>
        <script src="js/config.js"></script>
        <script type="text/javascript">
            // get filelist here
        </script>
        <script type="text/javascript">

        function update_checkbox() {
            set_all_checkbox_invisible();
            //set_checkbox_visible($('#current_img_id').text());
        }

        function update_quick_selection_table_color(current_location) {
            current_location = current_location || -1;

            var all_row_num = parseInt($('#row_num').text());
            var all_col_num = parseInt($('#col_num').text());

            //var ok_list_array = ($('#ok_list').text()).split(',');
            var start_idx = Math.floor(parseInt($('#current_page').text()) * (all_row_num * all_col_num));
            for(var i=0;i<(all_row_num * all_col_num);i++) {
                //if (ok_list_array.indexOf((start_idx+i).toString()) > -1) {
                if (is_in_ok_list(start_idx+i)) {
                    $('#qtd' + i).css('background-color', '#FFC8B4');
                }
                else {
                    $('#qtd' + i).css('background-color', '#fcffba');
                }
            }

            if(current_location != -1)
                $('#qtd' + (parseInt(current_location)%parseInt(all_row_num * all_col_num))).css('background-color', '#ffba42');
        }

        function update_quick_selection_table_mapping() {
            var all_row_num = parseInt($('#row_num').text());
            var all_col_num = parseInt($('#col_num').text());

            // use to #current_page_num deciding wich page we are in
            var current_page_num = parseInt($('#current_page').text());

            // compute current page start index
            var start_idx = Math.floor(current_page_num * (all_row_num * all_col_num));

            // update all mapping link
            $("#quick_selection_table td").unbind('click');
            $("#quick_selection_table td").click(function () {
                var column_num = parseInt($(this).index()) + 1;
                var row_num = parseInt($(this).parent().index()) + 1;

                var current_td_id = (row_num - 2) * (all_col_num) + (column_num - 1);

                if (1 <= parseInt(column_num) && parseInt(column_num) <= all_col_num &&
                    2 <= parseInt(row_num) && parseInt(row_num) <= (all_row_num+1))
                {
                    var current_td_id = (row_num - 2) * (all_col_num) + (column_num - 1);
                    current_td_id += start_idx;
                    $('#slider').flexslider(current_td_id);
                }
            });
        }

        function update_quick_selection_table_thumb() {
            var row_num = parseInt($('#row_num').text());
            var col_num = parseInt($('#col_num').text());
            var start_idx = Math.floor(parseInt($('#current_page').text()) * (row_num * col_num));

            for(var i=0;i<(row_num * col_num);i++) {
                var thumb_image = './images/smile.png';
                if(start_idx + i < filelist.length)
                    thumb_image = '../thumb/'+filelist[start_idx + i];

                $('#qtdimg'+i).attr('src', thumb_image);
            }
        }

        function update_sliderbar(gotopage) {
            gotopage = gotopage || -100;

            if(gotopage == -100) {
                $(function() {
                        var row_num = parseInt($('#row_num').text());
                        var col_num = parseInt($('#col_num').text());
                        var total_page_num = Math.ceil((filelist.length)/(row_num * col_num));
                        var per_step = parseInt(100/Math.floor((filelist.length)/(row_num * col_num)));
                        $('#sliderbar').slider({
                            step: per_step,
                            change: function() {

                                var all_row_num = parseInt($('#row_num').text());
                                var all_col_num = parseInt($('#col_num').text());
                                var all_total_page_num = Math.ceil((filelist.length)/(all_row_num * all_col_num));
                                var all_per_step = parseInt(100/Math.floor((filelist.length)/(all_row_num * all_col_num)));

                                $('#current_page').text(Math.floor($(this).slider("value")/all_per_step));
                                var page_num = Math.ceil($(this).slider("value")/all_per_step);
                                $('#qtdtitle').text('快  速  選  單  ['+(page_num+1)+"/"+(all_total_page_num)+"]");

                                update_quick_selection_table_mapping();
                                var current_page_num = parseInt($('#current_page').text());
                                var start_idx = Math.floor(current_page_num * (all_row_num * all_col_num));
                                $('#current_img_id').text(start_idx.toString());
                                update_quick_selection_table_color(start_idx);

                                update_checkbox();
                                $('#slider').flexslider(start_idx);
                                update_quick_selection_table_thumb();
                            },
                        });

                        var jump_to_page_num = Math.floor($('#current_img_id').text()/(row_num * col_num));
                        $('#sliderbar').slider({value: (jump_to_page_num*per_step)});
                        $('#current_page').text(jump_to_page_num);
                        $('#qtdtitle').text('快  速  選  單  ['+(jump_to_page_num+1)+"/"+(total_page_num)+"]");
                        $('#slider').flexslider(parseInt($('#current_img_id').text()));
                        update_quick_selection_table_color(parseInt($('#current_img_id').text()));
                        });
            }
            else {
                var row_num = parseInt($('#row_num').text());
                var col_num = parseInt($('#col_num').text());
                var total_page_num = Math.ceil((filelist.length)/(row_num * col_num));
                var per_step = parseInt(100/Math.floor((filelist.length)/(row_num * col_num)));
                var jump_to_page_num = (parseInt($('#current_page').text()) + gotopage);

                if((jump_to_page_num*per_step) > 100 || (jump_to_page_num*per_step) < 0)
                    return ;

                $('#sliderbar').slider({value: (jump_to_page_num*per_step)});
                $('#qtdtitle').text('快  速  選  單  ['+(jump_to_page_num+1)+"/"+total_page_num+"]");
                var last_page_num = $('#current_page').text();
                $('#current_page').text(jump_to_page_num);

                update_quick_selection_table_mapping();
                var current_page_num = parseInt($('#current_page').text());
                var start_idx = Math.floor(current_page_num * (row_num * col_num));
                $('#current_img_id').text(start_idx.toString());
                update_quick_selection_table_color(start_idx);

                update_checkbox();
                $('#slider').flexslider(start_idx);
            }

            update_quick_selection_table_thumb();
        }

        function flexslider_refresher() {
            $('#slider').flexslider({
                animation: "slide",
                controlNav: false,
                animationLoop: false,
                slideshow: false,
                sync: "#carousel",
                start: function (slider) {
                    $('body').removeClass('loading');
                },
                before: function(slider) {
                },
                after: function (slider) {

                    //    update_quick_selection_table_mapping();
/*
                    slider.currentSlide = (parseInt(slider.currentSlide)%(parseInt(row_num*col_num))) + (parseInt($('#current_page').text()) * (row_num * col_num));
                    alert(parseInt(slider.currentSlide) + ' - ' + parseInt(row_num*col_num));
                    alert((parseInt(slider.currentSlide)%(parseInt(row_num*col_num))));
*/
                    $('#showing_image_name').text($('#img' + slider.currentSlide).attr('alt'));
                    var row_num = parseInt($('#row_num').text());
                    var col_num = parseInt($('#col_num').text());


                    for(var i=0;i<(row_num*col_num);i++) {
                        if(is_in_ok_list((parseInt($('#current_page').text())*row_num*col_num)+i)) {
                            $('#qtd'+i).css('background-color', '#FFC8B4');
                        }
                        else {
                            $('#qtd'+i).css('background-color', '#fcffba');
                        }
                    }
                    $('#qtd' + (parseInt(slider.currentSlide)%(parseInt(row_num*col_num)))).css('background-color', '#ffba42');
                    $('#current_img_id').text(slider.currentSlide);

                    var ok_list_array = ($('#ok_list').text()).split(',');
                    if (ok_list_array.indexOf($('#current_img_id').text()) > -1) {
                        $('#cbcontainer').checked = true;
                    } else {
                        $('#cbcontainer').checked = false;
                    }

                    set_all_checkbox_invisible();
                    set_checkbox_visible(slider.currentSlide);
                    update_quick_selection_table_thumb();
                }
            });

            $('#showing_image_name').text($('#img0').attr('alt'));
            $('#qtd0').css('background-color', '#FFFFBB');
            $('#current_img_id').text('0');
        }

        function checkbox_generator() {
            //var all_num = parseInt($('#row_num').text()) * parseInt($('#col_num').text());
            var all_num = filelist.length;
            for(var i=0; i<all_num ;i++) {
                var checkbox_html = "<div id='checkbox_div"+i+"' style='position:absolute;left:4%;top:4%;background-color:#DDDDDD;visibility:hidden;'>";
                checkbox_html += "<input type='checkbox' id='cbobj"+i+"' />";
                checkbox_html += "<label for='cbobj"+i+"' class='check-box' id='cbobjlabel"+i+"'></label></div>";
                $('#cbcontainer_div').append(checkbox_html);
            }
        }

        function photos_generator() {
            $('#photo_slides_list').empty();
            //var all_num = parseInt($('#row_num').text()) * parseInt($('#col_num').text());
            //var photo_num = ((start_idx + all_num) < filelist.length) ? (start_idx + all_num) : filelist.length;
            for(var i=0 ; i < filelist.length ; i++) {
                var img_html = "<li><img src='../photo/"+filelist[i]+"' id='img"+i+"' name='img"+i+"' alt='"+filelist[i]+"' /></li>";
                $('#photo_slides_list').append(img_html);
            }
        }

        function quick_selection_table_generator(row_num, col_num, append_component) {

            $('#row_num').text(row_num);
            $('#col_num').text(col_num);

            var containerstart = "<div class='CSSTableGenerator' id='quick_selection_table_div' name='quick_selection_table_div'>";
            var containerend = "</div>";
            var tablestart = "<table id='quick_selection_table' name='quick_selection_table' role='quick_selection_table'>";
            var tableend = "</table>";
            var trstart = "<tr>";
            var trend = "</tr>";

            var firstline = "<tr><td id='qtdtitle' name='qtdtitle' colspan='" + col_num + "'>快 速 選 單</td></tr>";

            var table_result = '';
            var index = 0;

            table_result = containerstart + tablestart + firstline;
            for (var r = 0; r < row_num; r++) {
                table_result += trstart;
                for (var c = 0; c < col_num; c++) {
                    table_result += "<td id='qtd" + index + "' name='qtd" + index + "'><img src='images/smile.png' id='qtdimg" + index + "' name='qtdimg" + index + "'></img></td>";
                    index++;
                }
                table_result += trend;
            }
            table_result += tableend + containerend;

            $(append_component).append(table_result);
            set_quick_selction_table_td();
            $('#quick_selection_table_div').css('visibility', 'visible');
        }

        function quick_selection_table_remover() {
            $('#quick_selection_table_div').remove();
        }

        function show_check_box(idx, is_visible) {
            $('#checkbox_div' + idx).css('visibility', is_visible);
            $('#cbobj' + idx).css('visibility', is_visible);
            $('#cbobjlabel' + idx).css('visibility', is_visible);

            if (is_visible === 'visible') $('#checkbox_div' + idx).css('z-index', '2');
            else $('#checkbox_div' + idx).css('z-index', '-100');
        }

        function set_quick_selction_table_td() {
            var all_row_num = parseInt($('#row_num').text());
            var all_col_num = parseInt($('#col_num').text());
            var all_num = all_row_num * all_col_num;
            for (var i = 0; i <= all_num; i++) {
                if (is_in_ok_list(i) == true)
                    $('#qtd' + i).css('background-color', '#FFC8B4');
                else
                    $('#qtd' + i).css('background-color', '#fcffba');
            }

            $("#quick_selection_table td").click(function () {
                var column_num = parseInt($(this).index()) + 1;
                var row_num = parseInt($(this).parent().index()) + 1;
                if (1 <= parseInt(column_num) && parseInt(column_num) <= all_col_num &&
                    2 <= parseInt(row_num) && parseInt(row_num) <= (all_row_num+1))
                {
                    var current_td_id = (row_num - 2) * (all_col_num) + (column_num - 1); // set_all_checkbox_invisible();
                    $('#slider').flexslider(current_td_id);
                }
            });
        }

        function set_checkbox_visible(idx) {
            $('#debugmsg').text('set ' + idx + ' visible');
            var all_num = parseInt($('#row_num').text()) * parseInt($('#col_num').text());
            for (var i = 0; i < all_num; i++) {
                show_check_box(i, 'hidden');
            }

            show_check_box(idx, 'visible');
        }

        function set_all_checkbox_invisible() {
            $('#debugmsg').text('set all invisible');
            //var all_num = parseInt($('#row_num').text()) * parseInt($('#col_num').text());
            var all_num = filelist.length;
            for (var i = 0; i < all_num ; i++) {
                show_check_box(i, 'hidden');
            }
        }

        function is_in_ok_list(idx) {
            var ok_list_array = ($('#ok_list').text()).split(',');
            if (ok_list_array.indexOf(idx.toString()) > -1) return true;
            return false;
        }

        $(function () {
            SyntaxHighlighter.all();
        });

        $(window).load(flexslider_refresher);

        /*
        if ($(window).width() < 768) {
            quick_selection_table_remover();
            quick_selection_table_generator(6, 5, '#quick_selection_table_location_2');
            update_quick_selection_table_mapping();
            $('#br1').appendTo('#quick_selection_table_location_2');
            $('#br2').appendTo('#quick_selection_table_location_2');
            $('#sliderbar_arrow_container').appendTo('#quick_selection_table_location_2');
        } else {
            quick_selection_table_remover();
            quick_selection_table_generator(6, 4, '#quick_selection_table_location_1');
            update_quick_selection_table_mapping();
            $('#br1').appendTo('#quick_selection_table_location_1');
            $('#br2').appendTo('#quick_selection_table_location_1');
            $('#sliderbar_arrow_container').appendTo('#quick_selection_table_location_1');
        }
        */

        if ($(window).width() < 768) {
            $('#current_page').text( Math.floor(parseInt($('#current_img_id').text())/(30)) );

            quick_selection_table_remover();
            quick_selection_table_generator(6, 5, '#quick_selection_table_location_2');
            $('#br1').appendTo('#quick_selection_table_location_2');
            $('#br2').appendTo('#quick_selection_table_location_2');
            $('#sliderbar_arrow_container').appendTo('#quick_selection_table_location_2');

            var current_tbl_id = parseInt(parseInt($('#current_img_id').text())%(30));
            $('#qtd'+current_tbl_id).css('background-color', '#ffba42');
            update_sliderbar();
            update_quick_selection_table_thumb();
            update_quick_selection_table_color(parseInt($('#current_img_id').text()));
            update_quick_selection_table_mapping();
        } else {
            $('#current_page').text( Math.floor(parseInt($('#current_img_id').text())/(24)) );

            quick_selection_table_remover();
            quick_selection_table_generator(6, 4, '#quick_selection_table_location_1');
            $('#br1').appendTo('#quick_selection_table_location_1');
            $('#br2').appendTo('#quick_selection_table_location_1');
            $('#sliderbar_arrow_container').appendTo('#quick_selection_table_location_1');

            var current_tbl_id = parseInt(parseInt($('#current_img_id').text())%(30));
            $('#qtd'+current_tbl_id).css('background-color', '#ffba42');
            update_sliderbar();
            update_quick_selection_table_thumb();
            update_quick_selection_table_color(parseInt($('#current_img_id').text()));
            update_quick_selection_table_mapping();
        }

        photos_generator();
        checkbox_generator();

        $('#cbcontainer_div').css('visibility', 'hidden');

        var all_num = parseInt($('#row_num').text()) * parseInt($('#col_num').text());
        for (var i = 0; i < filelist.length; i++) {
            $("#cbobj" + i).change(function () {
                var sort_unique = function (arr) {
                        arr = arr.sort(function (a, b) {
                            return a * 1 - b * 1;
                        });
                        var ret = [arr[0]];
                        for (var i = 1; i < arr.length; i++) { // start loop at 1 as element 0 can never be a duplicate
                            if (arr[i - 1] !== arr[i]) {
                                ret.push(arr[i]);
                            }
                        }
                        return ret;
                    }

                if ($(this).is(':checked') == true) {
                    var ok_list_array = ($('#ok_list').text()).split(',');
                    if (ok_list_array.indexOf($('#current_img_id').text()) == -1) {
                        ok_list_array.push(parseInt($('#current_img_id').text()));
                        ok_list_array = sort_unique(ok_list_array);
                        $('#ok_list').text(ok_list_array.toString());
                        $('#qtd' + (parseInt($('#current_img_id').text())%(all_num))).css('background-color', '#FFC8B4');
                    }
                } else {
                    var sort_unique = function (arr) {
                            arr = arr.sort(function (a, b) {
                                return a * 1 - b * 1;
                            });
                            var ret = [arr[0]];
                            for (var i = 1; i < arr.length; i++) { // start loop at 1 as element 0 can never be a duplicate
                                if (arr[i - 1] !== arr[i]) {
                                    ret.push(arr[i]);
                                }
                            }
                            return ret;
                        }
                    var ok_list_array = ($('#ok_list').text()).split(',');
                    if (ok_list_array.indexOf($('#current_img_id').text()) > -1) {
                        ok_list_array.splice(ok_list_array.indexOf($('#current_img_id').text()), 1);
                        ok_list_array = sort_unique(ok_list_array);
                        $('#ok_list').text(ok_list_array.toString());
                        $('#qtd' + (parseInt($('#current_img_id').text())%(all_num))).css('background-color', '#ffba42');
                    }
                }
            });
        }
        $(window).resize(function () {
            setTimeout(function () {
                if ($(window).width() < 768) {
                    $('#current_page').text( Math.floor(parseInt($('#current_img_id').text())/(30)) );

                    quick_selection_table_remover();
                    quick_selection_table_generator(6, 5, '#quick_selection_table_location_2');
                    $('#br1').appendTo('#quick_selection_table_location_2');
                    $('#br2').appendTo('#quick_selection_table_location_2');
                    $('#sliderbar_arrow_container').appendTo('#quick_selection_table_location_2');

                    var current_tbl_id = parseInt(parseInt($('#current_img_id').text())%(30));
                    $('#qtd'+current_tbl_id).css('background-color', '#ffba42');
                    update_sliderbar();
                    update_quick_selection_table_thumb();
                    update_quick_selection_table_color(parseInt($('#current_img_id').text()));
                    update_quick_selection_table_mapping();

                    var tmp_current_img_id = $('#current_img_id').text();
                    var per_step = parseInt(100/Math.floor((filelist.length)/(30)));
                    $('#sliderbar').slider({value: (parseInt($('#current_page').text())*per_step)});
                    $('#current_img_id').text(tmp_current_img_id);
                    $('#slider').flexslider(tmp_current_img_id);
                } else {
                    $('#current_page').text( Math.floor(parseInt($('#current_img_id').text())/(24)) );

                    quick_selection_table_remover();
                    quick_selection_table_generator(6, 4, '#quick_selection_table_location_1');
                    $('#br1').appendTo('#quick_selection_table_location_1');
                    $('#br2').appendTo('#quick_selection_table_location_1');
                    $('#sliderbar_arrow_container').appendTo('#quick_selection_table_location_1');

                    var current_tbl_id = parseInt(parseInt($('#current_img_id').text())%(30));
                    $('#qtd'+current_tbl_id).css('background-color', '#ffba42');
                    update_sliderbar();
                    update_quick_selection_table_thumb();
                    update_quick_selection_table_color(parseInt($('#current_img_id').text()));
                    update_quick_selection_table_mapping();

                    var tmp_current_img_id = $('#current_img_id').text();
                    var per_step = parseInt(100/Math.floor((filelist.length)/(30)));
                    $('#sliderbar').slider({value: (parseInt($('#current_page').text())*per_step)});
                    $('#current_img_id').text(tmp_current_img_id);
                    $('#slider').flexslider(tmp_current_img_id);
                }
            }, 50);
        });

        $('#slider').hover(

        function () {
            setTimeout(function () {
                $('#cbcontainer_div').css('visibility', 'visible');
                set_checkbox_visible($('#current_img_id').text());
            }, 200);
        }, function () {
            $('#cbcontainer_div').css('visibility', 'hidden');
        });

        set_checkbox_visible(0);
        $('#current_page').text('0');
        $('#qtd0').css('background-color', '#fcffba');
        $('#arrow_prev').click(function () {
            update_sliderbar(-1);
        });
        $('#arrow_next').click(function () {
            update_sliderbar(1);
        });

        </script>
        <script src="js/jquery-ui.js"></script>
        <script type="text/javascript">
            update_sliderbar();
        </script>
        <script type="text/javascript">
        /*
            function iEsc(){ return false; }
            function iRec(){ return true; }
            function DisableKeys() {
                if(event.ctrlKey || event.shiftKey || event.altKey) {
                    window.event.returnValue=false;
                    iEsc();}
            }
            document.ondragstart=iEsc;
            document.onkeydown=DisableKeys;
            document.oncontextmenu=iEsc;
            if (typeof document.onselectstart !="undefined")
            document.onselectstart=iEsc;
            else{
                document.onmousedown=iEsc;
                document.onmouseup=iRec;
            }
            function DisableRightClick(qsyzDOTnet){
                if (window.Event){
                    if (qsyzDOTnet.which == 2 || qsyzDOTnet.which == 3)
                        iEsc();}
                else
                    if (event.button == 2 || event.button == 3){
                        event.cancelBubble = true
                            event.returnValue = false;
                        iEsc();}
            }
        */
        </script>
        <!-- Syntax Highlighter -->
        <script type="text/javascript" src="js/shCore.js"></script>
        <script type="text/javascript" src="js/shBrushXml.js"></script>
        <script type="text/javascript" src="js/shBrushJScript.js"></script>
        <!-- Optional FlexSlider Additions -->
        <script src="js/jquery.easing.js"></script>
        <script src="js/jquery.mousewheel.js"></script>
        <script defer src="js/demo.js"></script>
    </body>
</html>
